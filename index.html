<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pare de Comprar por Impulso - M√©todo Revolucion√°rio</title>
    <meta name="description" content="Cansado de comprar por impulso? Descubra um m√©todo revolucion√°rio de 7 dias para reprogramar sua mente e tomar o controle das suas finan√ßas. Sem planilhas, sem sofrimento.">
    <link rel="preload" as="audio" href="https://appestoicismo.github.io/parardegastar/paredegastar1.MP3">
    
    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1127160492081134');
    fbq('track', 'PageView');
    </script>
    <noscript>
    <img height="1" width="1" style="display:none"
         src="https://www.facebook.com/tr?id=1127160492081134&ev=PageView&noscript=1" alt="Facebook Pixel"/>
    </noscript>
    <!-- End Facebook Pixel Code -->

    <style>
        /* CSS Variables */
        :root {
            --brand-1: #667eea;
            --brand-2: #764ba2;
            --cta-1: #ff6b6b;
            --cta-2: #ee5a24;
            --bg: #ffffff;
            --text: #2c3e50;
            --text-secondary: #34495e;
            --text-muted: #555;
            --success: #27ae60;
            --success-light: #4CAF50;
            --warning: #FFD700;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.2);
            --border-radius: 15px;
            --transition: all 0.3s ease;
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, var(--brand-1) 0%, var(--brand-2) 100%);
            min-height: 100vh;
        }

        /* Utility Classes */
        .is-hidden {
            display: none !important;
        }

        .is-active {
            background: var(--brand-1) !important;
            color: white !important;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Animations */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-5px);
            }
            60% {
                transform: translateY(-3px);
            }
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse-button {
            0% {
                box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4), 
                            0 0 0 0 rgba(255, 107, 107, 0.7);
            }
            70% {
                box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4), 
                            0 0 0 10px rgba(255, 107, 107, 0);
            }
            100% {
                box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4), 
                            0 0 0 0 rgba(255, 107, 107, 0);
            }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: var(--bg);
            min-height: 100vh;
            box-shadow: 0 0 20px var(--shadow-light);
            transition: var(--transition);
        }

        .container.sticky-active {
            padding-top: 70px;
        }

        /* Sticky CTA Bar */
        .sticky-cta {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--cta-1);
            color: white;
            padding: 12px 20px;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 15px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
            animation: slideDown 0.3s ease-out;
            transition: var(--transition);
        }

        .sticky-cta.scrolled {
            background: linear-gradient(45deg, var(--cta-1), var(--cta-2));
            transform: scale(1.02);
        }

        .sticky-cta-text {
            font-size: 0.9em;
            font-weight: bold;
        }

        .sticky-cta-btn {
            background: var(--bg);
            color: var(--cta-1);
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            transition: var(--transition);
        }

        .sticky-cta-btn:hover,
        .sticky-cta-btn:focus {
            transform: scale(1.05);
            box-shadow: 0 2px 8px var(--shadow-medium);
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--brand-1);
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            transform: translateY(100px);
            transition: var(--transition);
            z-index: 999;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .back-to-top.show {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover,
        .back-to-top:focus {
            background: var(--brand-2);
            transform: translateY(0) scale(1.1);
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        /* Header Section */
        .headline {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
        }

        .main-headline {
            font-size: 2.2em;
            font-weight: bold;
            color: var(--text);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .sub-headline {
            font-size: 1.3em;
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .simple-text {
            font-size: 1.1em;
            color: var(--text-muted);
            margin-bottom: 30px;
        }

        /* Buttons */
        .cta-button {
            background: linear-gradient(45deg, var(--cta-1), var(--cta-2));
            color: white;
            padding: 20px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            display: inline-block;
        }

        .cta-button:hover,
        .cta-button:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
            outline: 3px solid var(--warning);
            outline-offset: 2px;
        }

        /* Special Audio Button */
        .cta-button.audio-special {
            background: var(--bg);
            color: var(--cta-1);
            border: 2px solid var(--cta-1);
            font-weight: 900;
            font-size: 1.3em;
            padding: 25px 45px;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4), 
                        0 0 0 0 rgba(255, 107, 107, 0.7);
            animation: pulse-button 2s infinite;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cta-button.audio-special:hover,
        .cta-button.audio-special:focus {
            background: var(--cta-1);
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.6), 
                        0 0 0 0 rgba(255, 107, 107, 0.7);
        }

        .cta-button.audio-special::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .cta-button.audio-special:hover::before {
            left: 100%;
        }

        /* Special Purchase Button */
        .cta-button.purchase-special {
            background: linear-gradient(45deg, var(--cta-1), var(--cta-2), var(--cta-1));
            background-size: 200% 200%;
            color: white;
            border: 3px solid white;
            font-weight: 900;
            font-size: 1.4em;
            padding: 25px 50px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5), 
                        0 0 0 0 rgba(255, 255, 255, 0.8),
                        inset 0 0 20px rgba(255, 255, 255, 0.2);
            animation: gradient-shift 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 2px;
            transform: scale(1.05);
            width: 100%;
            max-width: 100%;
        }

        .cta-button.purchase-special:hover,
        .cta-button.purchase-special:focus {
            background: linear-gradient(45deg, #e55a5a, #dc4924, #e55a5a);
            color: #fff;
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.7), 
                        0 0 0 5px rgba(255, 255, 255, 0.3),
                        inset 0 0 30px rgba(255, 255, 255, 0.3);
        }

        .cta-button.purchase-special::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.6s;
        }

        .cta-button.purchase-special:hover::before {
            left: 100%;
        }

        /* Quiz Section */
        .quiz-container {
            background: #f8f9fa;
            padding: 40px;
            border-radius: var(--border-radius);
            margin: 30px 0;
            box-shadow: 0 5px 20px var(--shadow-light);
        }

        .question {
            margin-bottom: 30px;
            border: none;
        }

        .question legend h3 {
            font-size: 1.4em;
            color: var(--text);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            background: var(--bg);
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1em;
            text-align: left;
        }

        .option:hover,
        .option:focus {
            border-color: var(--brand-1);
            background: #f8f9ff;
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        .option.selected {
            border-color: var(--brand-1);
            background: var(--brand-1);
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, var(--brand-1), var(--brand-2));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Result Page */
        .result-page {
            text-align: center;
            padding: 40px 20px;
        }

        /* Audio Section */
        .audio-section {
            background: var(--text);
            color: white;
            padding: 25px 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            text-align: center;
        }

        .custom-audio-player {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .audio-btn {
            background: linear-gradient(45deg, var(--brand-1), var(--brand-2));
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3em;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            color: white;
        }

        .audio-btn:hover,
        .audio-btn:focus {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 200px;
        }

        .progress-bar-audio {
            position: relative;
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill-audio {
            height: 100%;
            background: linear-gradient(45deg, var(--brand-1), var(--brand-2));
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .time-display {
            font-size: 0.85em;
            font-weight: bold;
            color: #ecf0f1;
            min-width: 40px;
        }

        .speed-control {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 10px;
            border-radius: 6px;
        }

        .speed-select {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            padding: 3px 6px;
            font-size: 0.8em;
            cursor: pointer;
        }

        .speed-select option {
            background: var(--text);
            color: white;
        }

        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
        }

        .volume-slider {
            width: 100px;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(45deg, var(--brand-1), var(--brand-2));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.4);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: linear-gradient(45deg, var(--brand-1), var(--brand-2));
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.4);
        }

        .audio-tip {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 10px;
            font-style: italic;
        }

        /* Offer Section */
        .offer-section {
            background: linear-gradient(135deg, var(--cta-1), var(--cta-2));
            color: white;
            padding: 30px 20px;
            border-radius: var(--border-radius);
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
            animation: slideInUp 0.8s ease-out;
        }

        .price {
            font-size: 2.5em;
            font-weight: bold;
            margin: 15px 0;
        }

        .guarantee {
            background: var(--success);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
            font-size: 0.95em;
        }

        /* Dynamic Benefits */
        .dynamic-benefits {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: left;
        }

        .dynamic-benefits ul {
            list-style: none;
            padding: 0;
        }

        .dynamic-benefits li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .dynamic-benefits li::before {
            content: 'üéØ';
            position: absolute;
            left: 0;
        }

        /* Testimonials */
        .testimonials {
            background: #f8f9fa;
            padding: 30px 20px;
            border-radius: var(--border-radius);
            margin: 30px 0;
        }

        .testimonials h3 {
            text-align: center;
            color: var(--text);
            margin-bottom: 25px;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .testimonial-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px var(--shadow-light);
            border-left: 4px solid var(--brand-1);
        }

        .testimonial-text {
            font-style: italic;
            margin-bottom: 15px;
            color: var(--text-muted);
        }

        .testimonial-author {
            font-weight: bold;
            color: var(--text);
        }

        .testimonial-location {
            font-size: 0.9em;
            color: var(--text-muted);
        }

        /* FAQ */
        .faq {
            background: #f8f9fa;
            padding: 30px 20px;
            border-radius: var(--border-radius);
            margin: 30px 0;
        }

        .faq h3 {
            text-align: center;
            color: var(--text);
            margin-bottom: 25px;
        }

        .faq-item {
            background: white;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px var(--shadow-light);
        }

        .faq-question {
            background: var(--brand-1);
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            border: none;
            width: 100%;
            text-align: left;
        }

        .faq-question:hover,
        .faq-question:focus {
            background: var(--brand-2);
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        .faq-question::after {
            content: '+';
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .faq-question.active::after {
            transform: rotate(45deg);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            background: white;
            color: var(--text-muted);
        }

        .faq-answer.active {
            padding: 15px 20px;
            max-height: 200px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.9em;
            border-top: 1px solid #e9ecef;
            margin-top: 40px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .container.sticky-active {
                padding-top: 60px;
            }
            
            .headline {
                padding: 20px 15px;
            }
            
            .main-headline {
                font-size: 1.8em;
            }
            
            .sub-headline {
                font-size: 1.1em;
            }
            
            .audio-section {
                padding: 20px 15px;
                margin: 15px 0;
            }
            
            .custom-audio-player {
                padding: 15px;
            }
            
            .audio-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .progress-container {
                order: -1;
                width: 100%;
            }
            
            .audio-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2em;
            }
            
            .time-display {
                font-size: 0.8em;
                min-width: 35px;
            }
            
            .speed-control {
                margin-top: 8px;
            }
            
            .offer-section {
                padding: 25px 15px;
                margin: 20px 0;
            }
            
            .price {
                font-size: 2.2em;
            }
            
            .cta-button.audio-special {
                font-size: 1.1em;
                padding: 20px 35px;
                letter-spacing: 1px;
            }
            
            .cta-button.purchase-special {
                font-size: 1.2em;
                padding: 20px 30px;
                letter-spacing: 1px;
            }

            .testimonial-grid {
                grid-template-columns: 1fr;
            }

            .sticky-cta {
                padding: 8px 15px;
                font-size: 0.85em;
            }

            .sticky-cta-btn {
                padding: 6px 12px;
                font-size: 0.75em;
            }
        }

        @media (max-width: 480px) {
            .main-headline {
                font-size: 1.6em;
            }
            
            .price {
                font-size: 2em;
            }
            
            .audio-section {
                padding: 15px 10px;
            }
            
            .offer-section {
                padding: 20px 10px;
            }

            .back-to-top {
                width: 45px;
                height: 45px;
                font-size: 18px;
                bottom: 15px;
                right: 15px;
            }
        }

        /* Focus styles for better accessibility */
        *:focus {
            outline: 2px solid var(--warning);
            outline-offset: 2px;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --text: #000000;
                --bg: #ffffff;
                --brand-1: #0000ff;
                --brand-2: #800080;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <header class="sticky-cta" id="sticky-cta">
        <span class="sticky-cta-text">üéß R$ 19,90 - Reprograme sua mente!</span>
        <a href="https://pay.hotmart.com/F101859096T?off=p1agmrhh&checkoutMode=10" 
           target="_blank" 
           rel="noopener noreferrer sponsored" 
           class="sticky-cta-btn checkout-link">
            ACESSAR AGORA
        </a>
    </header>

    <main class="container" id="main-container">
        <section id="homepage" aria-labelledby="main-headline">
            <div class="headline">
                <h1 id="main-headline" class="main-headline">
                    VOC√ä N√ÉO PRECISA ENFIAR SEU CART√ÉO DE CR√âDITO NO CONGELADOR 
                </h1>
                
                <h2 class="sub-headline">
                    Gente comum est√° reduzindo compras por impulso sem planilhas e sem for√ßa bruta.
                </h2>
                
                <p class="simple-text">
                    √â MAIS SIMPLES DO QUE VOC√ä PENSA.
                </p>
                
                <p class="simple-text">
                    Mas para te revelar isso, eu preciso te fazer tr√™s perguntinhas simples, voc√™ topa?
                </p>
                
                <button class="cta-button" id="start-quiz-btn" aria-label="Iniciar quiz de 3 perguntas">
                    Topo as 3 perguntas üöÄ
                </button>
            </div>
        </section>

        <section id="quiz-container" class="quiz-container is-hidden" aria-live="polite">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <form id="quiz-form">
                <fieldset id="question1" class="question">
                    <legend><h3>Quando voc√™ percebe que fez mais uma compra por IMPULSO, qual desses sentimentos √© o que mais aparece?</h3></legend>
                    <div class="options">
                        <button type="button" class="option" data-question="1" data-value="a">üòî Culpa imediata</button>
                        <button type="button" class="option" data-question="1" data-value="b">üí∏ Arrependimento financeiro</button>
                        <button type="button" class="option" data-question="1" data-value="c">üò∞ Ansiedade com as contas</button>
                        <button type="button" class="option" data-question="1" data-value="d">üòû Sensa√ß√£o de vazio e des√¢nimo</button>
                        <button type="button" class="option" data-question="1" data-value="e">üò° Raiva de si mesmo</button>
                    </div>
                </fieldset>

                <fieldset id="question2" class="question is-hidden">
                    <legend><h3>No momento em que voc√™ est√° prestes a confirmar uma compra, qual dessas sensa√ß√µes f√≠sicas descreve melhor o que voc√™ sente?</h3></legend>
                    <div class="options">
                        <button type="button" class="option" data-question="2" data-value="a">üíì Cora√ß√£o acelerado</button>
                        <button type="button" class="option" data-question="2" data-value="b">ü´Å Respira√ß√£o mais r√°pida</button>
                        <button type="button" class="option" data-question="2" data-value="c">‚ú® Sensa√ß√£o de euforia</button>
                        <button type="button" class="option" data-question="2" data-value="d">‚ö° Pressa em comprar logo</button>
                        <button type="button" class="option" data-question="2" data-value="e">üî• Calor no corpo (adrenalina)</button>
                    </div>
                </fieldset>

                <fieldset id="question3" class="question is-hidden">
                    <legend><h3>Se voc√™ conseguir se livrar do h√°bito de comprar coisas por impulso, qual desses benef√≠cios seria o mais valioso para voc√™?</h3></legend>
                    <div class="options">
                        <button type="button" class="option" data-question="3" data-value="a">üíº Ter controle financeiro de verdade</button>
                        <button type="button" class="option" data-question="3" data-value="b">üòå Sentir paz mental sem culpa ou arrependimento</button>
                        <button type="button" class="option" data-question="3" data-value="c">üí™ Orgulho pessoal por ter disciplina</button>
                        <button type="button" class="option" data-question="3" data-value="d">üõ°Ô∏è Seguran√ßa financeira com reserva guardada</button>
                        <button type="button" class="option" data-question="3" data-value="e">üòä Felicidade duradoura ao investir no que importa</button>
                    </div>
                </fieldset>
            </form>
        </section>

        <section id="result-page" class="result-page is-hidden" aria-live="polite">
            <h2 style="color: var(--text); margin-bottom: 30px;">Sua Resposta Revela Muito Sobre Voc√™...</h2>
            
            <div id="personalized-message" style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 20px 0; text-align: left;">
            </div>
            
            <p style="font-size: 1.2em; margin: 30px 0; color: var(--text-secondary);">
                O que parece simples 'falta de controle' na hora da compra, tem na verdade uma explica√ß√£o psicol√≥gica muito curiosa. Vamos ouvir o que a psiquiatra Ana Beatriz diz √† respeito:
            </p>
            
            <button class="cta-button audio-special" id="show-audio-btn" style="margin: 30px 0;" aria-label="Ouvir √°udio da psiquiatra sobre compras por impulso">
                Quero Ouvir Sobre Isso! üéØ
            </button>
        </section>

        <section id="audio-section" class="audio-section is-hidden" aria-labelledby="audio-heading">
            <h3 id="audio-heading" style="font-size: 1.4em; margin-bottom: 10px;">üéµ OU√áA O √ÅUDIO</h3>
            <p style="font-size: 1em; opacity: 0.9; margin-bottom: 20px;">O que a psiquiatra Ana Beatriz fala sobre comprar por impulso?</p>
            
            <audio id="hypnosisAudio" preload="metadata" aria-controls="audio-controls" aria-label="√Åudio de hipnoterapia para compras por impulso">
                <source src="https://appestoicismo.github.io/parardegastar/paredegastar1.MP3" type="audio/mpeg">
                Seu navegador n√£o suporta o elemento de √°udio.
            </audio>
            
            <div class="custom-audio-player" id="audio-controls">
            </div>

            <div class="audio-tip">
                üí° Use fones para melhor efeito (opcional)
            </div>
        </section>

        <section id="offer-section" class="offer-section is-hidden" aria-labelledby="offer-heading">
            <h3 id="offer-heading" style="font-size: 1.6em; margin-bottom: 15px;">
                üéØ OFERTA IMPERD√çVEL - APENAS HOJE!
            </h3>
            
            <p style="font-size: 1.1em; margin-bottom: 15px;">
                Reprograme sua mente para nunca mais comprar por impulso!
            </p>
            
            <div style="text-decoration: line-through; font-size: 1.1em; opacity: 0.7;">
                De R$ 97,00
            </div>
            
            <div class="price">
                R$ 19,90
            </div>

            <div id="dynamic-benefits" class="dynamic-benefits">
                <h4 style="text-align: center; margin-bottom: 10px; font-size: 1.1em;">üéØ BENEF√çCIOS PERSONALIZADOS PARA VOC√ä:</h4>
                <ul id="personalized-bullets">
                </ul>
            </div>
            
            <div style="text-align: left; margin: 20px 0;">
                <div style="background: rgba(255,255,255,0.15); padding: 12px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                    <strong style="font-size: 1.1em;">üì¶ O QUE VOC√ä RECEBE HOJE:</strong>
                </div>
                
                <div style="background: rgba(255,255,255,0.08); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid rgba(255,255,255,0.3);">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="color: var(--success-light); font-size: 1.2em; flex-shrink: 0;" aria-hidden="true">‚úÖ</span>
                        <div>
                            <strong>√Åudio de hipnoterapia</strong><br>
                            <span style="font-size: 0.95em; opacity: 0.9;">Para reprogramar os padr√µes de comportamento autom√°tico e neutralizar o impulso de comprar</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.08); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid rgba(255,255,255,0.3);">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="color: var(--success-light); font-size: 1.2em; flex-shrink: 0;" aria-hidden="true">‚úÖ</span>
                        <div>
                            <strong>Acesso ao aplicativo de Auto Hipnose</strong><br>
                            <span style="font-size: 0.95em; opacity: 0.9;">Com √°udios hipn√≥ticos e ferramentas de autoconhecimento gr√°tis e com descontos</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.08); padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid var(--warning);">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="color: var(--warning); font-size: 1.2em; flex-shrink: 0;" aria-hidden="true">üéÅ</span>
                        <div>
                            <strong style="color: var(--warning);">B√îNUS - Ferramenta Perfil Comportamental</strong><br>
                            <span style="font-size: 0.95em; opacity: 0.9;">Descubra o seu perfil comportamental</span>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.08); padding: 15px; border-radius: 8px; border-left: 4px solid rgba(255,255,255,0.3);">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="color: var(--success-light); font-size: 1.2em; flex-shrink: 0;" aria-hidden="true">‚úÖ</span>
                        <div>
                            <strong>Acesso √† comunidade do AppAutoHipnose</strong><br>
                            <span style="font-size: 0.95em; opacity: 0.9;">Li√ß√µes, ensinamentos e orienta√ß√µes sobre hipnose e autoconhecimento direto no seu celular</span>
                        </div>
                    </div>
                </div>
            </div>

            <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 12px; margin: 20px 0; text-align: left;">
                <h4 style="text-align: center; margin-bottom: 15px; font-size: 1.2em;">üìã COMO USAR O √ÅUDIO:</h4>
                <ol style="list-style: none; counter-reset: step; padding: 0;">
                    <li style="counter-increment: step; margin-bottom: 10px; padding-left: 30px; position: relative;">
                        <span style="position: absolute; left: 0; top: 0; background: rgba(255, 255, 255, 0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8em; font-weight: bold;">1</span>
                        <strong>Ambiente:</strong> Use fones ou encontre um local silencioso
                    </li>
                    <li style="counter-increment: step; margin-bottom: 10px; padding-left: 30px; position: relative;">
                        <span style="position: absolute; left: 0; top: 0; background: rgba(255, 255, 255, 0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8em; font-weight: bold;">2</span>
                        <strong>Frequ√™ncia:</strong> Ou√ßa 1x por dia durante 7 dias
                    </li>
                    <li style="counter-increment: step; margin-bottom: 10px; padding-left: 30px; position: relative;">
                        <span style="position: absolute; left: 0; top: 0; background: rgba(255, 255, 255, 0.2); width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8em; font-weight: bold;">3</span>
                        <strong>Momento ideal:</strong> In√≠cio ou final do dia
                    </li>
                </ol>
            </div>
            
            <div class="guarantee">
                üõ°Ô∏è GARANTIA INCONDICIONAL DE 7 DIAS
                <br>Se n√£o funcionar, devolvemos 100% do seu dinheiro!
            </div>
            
            <a href="https://pay.hotmart.com/F101859096T?off=p1agmrhh&checkoutMode=10" 
               target="_blank" 
               rel="noopener noreferrer sponsored" 
               class="checkout-link">
                <button class="cta-button purchase-special" aria-label="Acessar √°udio de hipnoterapia agora por R$19,90">
                    ACESSAR MEU √ÅUDIO AGORA! üöÄ
                </button>
            </a>
        </section>

        <section id="testimonials" class="testimonials is-hidden" aria-labelledby="testimonials-heading">
            <h3 id="testimonials-heading">üí¨ O QUE NOSSOS CLIENTES DIZEM:</h3>
            <div class="testimonial-grid" id="testimonial-container">
            </div>
        </section>

        <section id="faq" class="faq is-hidden" aria-labelledby="faq-heading">
            <h3 id="faq-heading">‚ùì PERGUNTAS FREQUENTES:</h3>
            <div id="faq-container">
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Conte√∫do de Hipnoterapia; n√£o substitui aconselhamento m√©dico/Medicamentos.</p>
        <p style="margin-top: 10px;">&copy; 2024. Todos os direitos reservados.</p>
    </footer>

    <button id="back-to-top" class="back-to-top is-hidden" aria-label="Voltar ao topo">
        &#8679;
    </button>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            PIXEL_ID: '1127160492081134',
            AUDIO_URL: 'https://appestoicismo.github.io/parardegastar/paredegastar1.MP3',
            CHECKOUT_URL: 'https://pay.hotmart.com/F101859096T?off=p1agmrhh&checkoutMode=10',
            AUDIO_DURATION: 1800, // 30 minutos em segundos - AJUSTE CONFORME NECESS√ÅRIO
            TRACKING: {
                STATE_SAVE_INTERVAL: 10000, // 10 seconds
                STATE_MAX_AGE: 86400000 // 24 hours
            }
        };

        // ===== STATE MANAGEMENT =====
        class StateManager {
            constructor() {
                this.state = {
                    currentQuestion: 1,
                    answers: {},
                    totalListenTime: 0,
                    audioSessionStartTime: null,
                    isListening: false,
                    offerShown: false,
                    pixelReady: false,
                    utmsApplied: false,
                    sessionId: this.generateSessionId()
                };
                this.restoreState();
            }

            generateSessionId() {
                return 'pg_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            saveState() {
                try {
                    const stateToSave = {
                        ...this.state,
                        timestamp: Date.now()
                    };
                    localStorage.setItem('pg_impulse_state', JSON.stringify(stateToSave));
                } catch (error) {
                    console.warn('Failed to save state:', error);
                }
            }

            restoreState() {
                try {
                    const savedState = localStorage.getItem('pg_impulse_state');
                    if (!savedState) return false;

                    const state = JSON.parse(savedState);
                    const age = Date.now() - (state.timestamp || 0);

                    if (age < CONFIG.TRACKING.STATE_MAX_AGE) {
                        Object.assign(this.state, state);
                        return true;
                    }
                } catch (error) {
                    console.warn('Failed to restore state:', error);
                }
                return false;
            }

            updateState(updates) {
                Object.assign(this.state, updates);
                this.saveState();
            }
        }

        // ===== FACEBOOK PIXEL TRACKING =====
        class PixelTracker {
            constructor(stateManager) {
                this.stateManager = stateManager;
                this.initPixel();
            }

            initPixel() {
                // Pixel is already loaded in HTML head
                if (typeof fbq !== 'undefined') {
                    this.stateManager.updateState({ pixelReady: true });
                    console.log('Facebook Pixel initialized successfully');
                } else {
                    console.warn('Facebook Pixel not loaded');
                }
            }

            track(eventName, parameters = {}) {
                if (!this.stateManager.state.pixelReady) {
                    console.warn('Pixel not ready, queuing event:', eventName);
                    return;
                }

                try {
                    // Add common parameters
                    const enrichedParams = {
                        ...parameters,
                        session_id: this.stateManager.state.sessionId,
                        timestamp: Date.now(),
                        page_url: window.location.href
                    };

                    fbq('track', eventName, enrichedParams);
                    console.log('Pixel event tracked:', eventName, enrichedParams);
                } catch (error) {
                    console.error('Pixel tracking error:', error);
                }
            }

            trackCustomEvent(eventName, parameters = {}) {
                this.track('CustomEvent', {
                    event_name: eventName,
                    ...parameters
                });
            }
        }

        // ===== UTM TRACKING =====
        class UTMTracker {
            constructor() {
                this.utmParams = this.extractUTMs();
            }

            extractUTMs() {
                const urlParams = new URLSearchParams(window.location.search);
                const utmKeys = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'fbclid', 'gclid'];
                const utms = {};

                utmKeys.forEach(key => {
                    const value = urlParams.get(key);
                    if (value) utms[key] = value;
                });

                return utms;
            }

            appendToUrl(url) {
                try {
                    const urlObj = new URL(url);
                    
                    // Add UTM parameters
                    Object.entries(this.utmParams).forEach(([key, value]) => {
                        urlObj.searchParams.set(key, value);
                    });

                    // Add tracking parameters
                    urlObj.searchParams.set('tracking_session', stateManager.state.sessionId);
                    urlObj.searchParams.set('tracking_time', Date.now().toString());

                    return urlObj.toString();
                } catch (error) {
                    console.error('UTM append error:', error);
                    return url;
                }
            }

            applyToAllLinks() {
                document.querySelectorAll('.checkout-link').forEach(link => {
                    link.href = this.appendToUrl(link.href);
                });
            }
        }

        // ===== QUIZ SYSTEM =====
        class QuizManager {
            constructor(stateManager, pixelTracker) {
                this.stateManager = stateManager;
                this.pixelTracker = pixelTracker;
                this.initQuiz();
            }

            initQuiz() {
                const startBtn = document.getElementById('start-quiz-btn');
                if (startBtn) {
                    startBtn.addEventListener('click', () => this.startQuiz());
                }

                // Add event listeners to all option buttons
                document.querySelectorAll('.option').forEach(button => {
                    button.addEventListener('click', (e) => this.selectOption(e.target));
                });
            }

            startQuiz() {
                document.getElementById('homepage').classList.add('is-hidden');
                document.getElementById('quiz-container').classList.remove('is-hidden');
                
                this.updateProgress();
                
                this.pixelTracker.track('ViewContent', {
                    content_name: 'Quiz Started',
                    content_category: 'Quiz',
                    step: 'quiz_start'
                });

                this.scrollToElement('quiz-container');
            }

            selectOption(button) {
                const questionNum = parseInt(button.dataset.question);
                const value = button.dataset.value;

                // Remove previous selections
                const options = button.parentNode.querySelectorAll('.option');
                options.forEach(opt => opt.classList.remove('selected', 'is-active'));

                // Add selection to clicked option
                button.classList.add('selected', 'is-active');
                
                // Update state
                const answers = { ...this.stateManager.state.answers };
                answers[questionNum] = value;
                this.stateManager.updateState({ answers });

                // Track selection
                this.pixelTracker.trackCustomEvent('Quiz_Question_Answered', {
                    content_name: `Question ${questionNum} Answered`,
                    question_number: questionNum,
                    answer: value,
                    quiz_progress: Math.round((questionNum / 3) * 100)
                });

                // Move to next question or show results
                setTimeout(() => {
                    if (questionNum < 3) {
                        this.nextQuestion(questionNum);
                    } else {
                        this.showResults();
                    }
                }, 800);
            }

            nextQuestion(currentQuestion) {
                document.getElementById(`question${currentQuestion}`).classList.add('is-hidden');
                document.getElementById(`question${currentQuestion + 1}`).classList.remove('is-hidden');
                
                this.stateManager.updateState({ currentQuestion: currentQuestion + 1 });
                this.updateProgress();
                
                setTimeout(() => {
                    this.scrollToElement(`question${currentQuestion + 1}`);
                }, 100);
            }

            updateProgress() {
                const progress = ((this.stateManager.state.currentQuestion - 1) / 3) * 100;
                const progressFill = document.getElementById('progress-fill');
                if (progressFill) {
                    progressFill.style.width = progress + '%';
                }
            }

            showResults() {
                document.getElementById('quiz-container').classList.add('is-hidden');
                document.getElementById('result-page').classList.remove('is-hidden');

                this.renderPersonalizedMessage();

                // Track qualified lead
                this.pixelTracker.track('Lead', {
                    content_name: 'Quiz Completed - Qualified Lead',
                    content_category: 'Quiz Completion',
                    quiz_answers: JSON.stringify(this.stateManager.state.answers),
                    lead_quality: 'high'
                });

                this.scrollToElement('result-page');
            }

            renderPersonalizedMessage() {
                const answers = this.stateManager.state.answers;
                const q1 = answers[1];
                const q3 = answers[3];
                
                const messages = this.getPersonalizedMessages();
                const message = messages[q3] && messages[q3][q1] ? messages[q3][q1] : messages.default;
                
                const messageContainer = document.getElementById('personalized-message');
                if (messageContainer) {
                    messageContainer.innerHTML = message;
                }
            }

            getPersonalizedMessages() {
                return {
                    a: { // Q3 = controle financeiro
                        a: "<strong>üíº Controle + Culpa Imediata</strong><br><br>Sua combina√ß√£o revela uma mente anal√≠tica que se cobra por cada deslize financeiro. A culpa que voc√™ sente ap√≥s compras impulsivas na verdade demonstra sua consci√™ncia sobre a import√¢ncia do controle. Seu subconsciente j√° sabe o caminho - voc√™ s√≥ precisa da ferramenta certa para transformar essa culpa em disciplina positiva.",
                        b: "<strong>üíº Controle + Arrependimento</strong><br><br>Voc√™ possui uma vis√£o clara de que controle financeiro traz liberdade, mas o arrependimento ainda trava seus progressos. Essa tens√£o entre o que voc√™ sabe ser certo e o que faz impulsivamente √© exatamente onde a hipnoterapia atua - realinhando suas a√ß√µes com suas inten√ß√µes conscientes.",
                        c: "<strong>üíº Controle + Ansiedade</strong><br><br>A ansiedade com as contas revela que voc√™ entende as consequ√™ncias reais das compras impulsivas. Seu desejo por controle financeiro nasce de uma necessidade genu√≠na de seguran√ßa. A hipnoterapia pode transformar essa ansiedade em motiva√ß√£o positiva para decis√µes mais conscientes.",
                        d: "<strong>üíº Controle + Vazio</strong><br><br>Voc√™ reconhece que o vazio ap√≥s compras impulsivas s√≥ pode ser preenchido com controle genu√≠no sobre suas finan√ßas. Essa percep√ß√£o profunda mostra maturidade emocional - voc√™ sabe que controle financeiro traz satisfa√ß√£o duradoura, n√£o apenas prazer moment√¢neo.",
                        e: "<strong>üíº Controle + Raiva</strong><br><br>A raiva de si mesmo ap√≥s compras impulsivas √© o combust√≠vel perfeito para desenvolver controle financeiro real. Voc√™ tem energia emocional suficiente para mudan√ßa - s√≥ precisa direcionar essa for√ßa para construir novos padr√µes ao inv√©s de se punir pelos antigos."
                    },
                    b: { // Q3 = paz mental
                        a: "<strong>üòå Paz Mental + Culpa</strong><br><br>Voc√™ entende que a verdadeira riqueza est√° na tranquilidade mental. A culpa que sente ap√≥s compras impulsivas √© seu sistema interno pedindo por harmonia. Seu subconsciente j√° sabe que paz mental vale mais que qualquer objeto - a hipnoterapia vai fortalecer essa sabedoria interna.",
                        b: "<strong>üòå Paz Mental + Arrependimento</strong><br><br>Sua busca por paz mental mostra alta intelig√™ncia emocional. O arrependimento financeiro rouba sua serenidade - voc√™ reconhece isso. A hipnoterapia pode quebrar esse ciclo, substituindo o arrependimento por decis√µes conscientes que alimentam sua paz interior.",
                        c: "<strong>üòå Paz Mental + Ansiedade</strong><br><br>A ansiedade financeira √© o oposto da paz que voc√™ busca. Voc√™ tem clareza de que tranquilidade mental √© mais valiosa que qualquer compra. A hipnoterapia pode transformar essa ansiedade em serenidade duradoura, alinhando suas a√ß√µes com sua busca por harmonia.",
                        d: "<strong>üòå Paz Mental + Vazio</strong><br><br>Voc√™ percebe que o vazio p√≥s-compra nunca traz a paz que realmente busca. Essa consci√™ncia √© poderosa - mostra que voc√™ sabe onde encontrar satisfa√ß√£o real. A hipnoterapia vai amplificar essa sabedoria, criando paz genu√≠na que n√£o depende de consumo.",
                        e: "<strong>üòå Paz Mental + Raiva</strong><br><br>A raiva consigo mesmo perturba a paz mental que voc√™ tanto valoriza. Voc√™ reconhece que serenidade √© incompat√≠vel com esse ciclo de compra-raiva-culpa. A hipnoterapia pode transformar essa raiva em autocompaix√£o e decis√µes mais harmoniosas."
                    },
                    c: { // Q3 = orgulho/disciplina
                        a: "<strong>üí™ Disciplina + Culpa</strong><br><br>Voc√™ valoriza disciplina e por isso a culpa ap√≥s compras impulsivas √© t√£o intensa. Essa culpa √© na verdade seu sistema interno cobrando consist√™ncia. Voc√™ tem potencial para disciplina - precisa apenas da ferramenta certa para transformar culpa em for√ßa de vontade positiva.",
                        b: "<strong>üí™ Disciplina + Arrependimento</strong><br><br>O arrependimento financeiro alimenta seu desejo por disciplina genu√≠na. Voc√™ se cobra porque sabe do que √© capaz quando mant√©m consist√™ncia. A hipnoterapia pode transformar esse arrependimento em combust√≠vel para construir a disciplina que voc√™ admira em si mesmo.",
                        c: "<strong>üí™ Disciplina + Ansiedade</strong><br><br>A ansiedade com contas na verdade demonstra que voc√™ leva disciplina a s√©rio. Voc√™ se preocupa porque tem padr√µes altos para si mesmo. Essa tens√£o pode se tornar sua maior for√ßa - a hipnoterapia vai canalizar essa energia para disciplina construtiva.",
                        d: "<strong>üí™ Disciplina + Vazio</strong><br><br>O vazio p√≥s-compra contrasta diretamente com o orgulho que voc√™ sente quando age com disciplina. Voc√™ conhece a diferen√ßa - isso √© poder. A hipnoterapia pode amplificar esses momentos de orgulho genu√≠no, tornando a disciplina seu estado natural.",
                        e: "<strong>üí™ Disciplina + Raiva</strong><br><br>A raiva consigo mesmo mostra que voc√™ tem energia e padr√µes elevados - ingredientes perfeitos para disciplina real. Voc√™ se irrita porque sabe do seu potencial. A hipnoterapia pode direcionar essa intensidade emocional para construir disciplina duradoura."
                    },
                    d: { // Q3 = seguran√ßa
                        a: "<strong>üõ°Ô∏è Seguran√ßa + Culpa</strong><br><br>Voc√™ entende que seguran√ßa financeira √© constru√≠da atrav√©s de escolhas consistentes. A culpa ap√≥s compras impulsivas √© seu sistema interno protegendo seu futuro. Essa consci√™ncia √© valiosa - a hipnoterapia pode transformar culpa em decis√µes que fortalecem sua seguran√ßa.",
                        b: "<strong>üõ°Ô∏è Seguran√ßa + Arrependimento</strong><br><br>O arrependimento financeiro reflete sua compreens√£o profunda sobre a import√¢ncia da seguran√ßa. Voc√™ se arrepende porque cada compra impulsiva afasta voc√™ da prote√ß√£o que busca. A hipnoterapia pode realinhar suas a√ß√µes com essa vis√£o de longo prazo.",
                        c: "<strong>üõ°Ô∏è Seguran√ßa + Ansiedade</strong><br><br>A ansiedade com contas √© seu sistema de alerta trabalhando perfeitamente - voc√™ reconhece amea√ßas √† sua seguran√ßa financeira. Essa preocupa√ß√£o genu√≠na pode se tornar sua maior for√ßa quando canalizada corretamente atrav√©s da hipnoterapia.",
                        d: "<strong>üõ°Ô∏è Seguran√ßa + Vazio</strong><br><br>O contraste entre o vazio p√≥s-compra e a seguran√ßa que voc√™ busca √© cristalino para voc√™. Essa clareza √© um dom - voc√™ sabe que seguran√ßa real vem de escolhas consistentes, n√£o de compras impulsivas. A hipnoterapia vai fortalecer essa sabedoria.",
                        e: "<strong>üõ°Ô∏è Seguran√ßa + Raiva</strong><br><br>A raiva ap√≥s compras impulsivas mostra que voc√™ leva seguran√ßa financeira muito a s√©rio. Essa intensidade emocional √© energia pura para mudan√ßa - a hipnoterapia pode transformar essa raiva em determina√ß√£o para construir a seguran√ßa que voc√™ merece."
                    },
                    e: { // Q3 = felicidade
                        a: "<strong>üòä Felicidade + Culpa</strong><br><br>Voc√™ busca felicidade genu√≠na e por isso a culpa p√≥s-compra √© t√£o dolorosa - voc√™ sabe que n√£o √© assim que se constr√≥i alegria real. Essa consci√™ncia √© preciosa. A hipnoterapia pode ajudar voc√™ a encontrar satisfa√ß√£o duradoura investindo no que realmente importa.",
                        b: "<strong>üòä Felicidade + Arrependimento</strong><br><br>O arrependimento financeiro rouba sua alegria - e voc√™ percebe isso claramente. Sua busca por felicidade duradoura atrav√©s de investimentos conscientes mostra sabedoria emocional. A hipnoterapia pode quebrar o ciclo compra-arrependimento e abrir espa√ßo para alegria genu√≠na.",
                        c: "<strong>üòä Felicidade + Ansiedade</strong><br><br>A ansiedade financeira √© o oposto da felicidade que voc√™ busca. Voc√™ tem a sabedoria de saber que alegria real vem de investir no que importa, n√£o de compras impulsivas. A hipnoterapia pode transformar essa ansiedade em serenidade e decis√µes mais felizes.",
                        d: "<strong>üòä Felicidade + Vazio</strong><br><br>O vazio p√≥s-compra contrasta totalmente com a felicidade duradoura que voc√™ busca. Voc√™ sabe a diferen√ßa entre prazer moment√¢neo e alegria real. A hipnoterapia pode amplificar essa sabedoria, direcionando sua energia para investimentos que trazem felicidade genu√≠na.",
                        e: "<strong>üòä Felicidade + Raiva</strong><br><br>A raiva consigo mesmo ap√≥s compras impulsivas mostra que voc√™ tem padr√µes altos para sua felicidade - voc√™ n√£o se contenta com alegrias superficiais. Essa exig√™ncia interna √© um presente. A hipnoterapia pode canalizar essa energia para construir felicidade duradoura."
                    },
                    default: "<strong>üéØ Sua Jornada de Transforma√ß√£o</strong><br><br>Suas respostas revelam uma pessoa consciente que busca mudan√ßa real. Voc√™ j√° reconhece os padr√µes que quer transformar - isso √© o primeiro e mais importante passo. A hipnoterapia pode ser a ferramenta que voc√™ precisa para alinhar suas a√ß√µes com seus valores mais profundos."
                };
            }

            scrollToElement(elementId) {
                setTimeout(() => {
                    const element = document.getElementById(elementId);
                    if (element) {
                        element.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }, 300);
            }
        }

        // ===== AUDIO PLAYER =====
        class AudioPlayer {
            constructor(stateManager, pixelTracker) {
                this.stateManager = stateManager;
                this.pixelTracker = pixelTracker;
                this.audio = null;
                this.initAudioPlayer();
            }

            initAudioPlayer() {
                const showAudioBtn = document.getElementById('show-audio-btn');
                if (showAudioBtn) {
                    showAudioBtn.addEventListener('click', () => this.showAudio());
                }
            }

            showAudio() {
                document.getElementById('result-page').classList.add('is-hidden');
                document.getElementById('audio-section').classList.remove('is-hidden');
                
                // NOVO: Mostrar oferta imediatamente junto com o √°udio
                document.getElementById('offer-section').classList.remove('is-hidden');

                this.pixelTracker.track('ViewContent', {
                    content_name: 'Audio Section Viewed',
                    content_category: 'Audio Content',
                    content_type: 'hypnosis_audio',
                    intent_level: 'high'
                });

                this.setupAudioControls();
                
                // NOVO: Configurar conte√∫do da oferta imediatamente
                if (!this.stateManager.state.offerShown) {
                    this.stateManager.updateState({ offerShown: true });
                    this.renderDynamicBenefits();
                    this.renderTestimonials();
                    this.renderFAQ();
                    this.setupStickyCTA();

                    // Track AddToCart event
                    this.pixelTracker.track('AddToCart', {
                        content_name: 'Hypnosis Audio Offer',
                        content_category: 'Digital Product',
                        value: 19.90,
                        currency: 'BRL',
                        audio_listen_time: this.stateManager.state.totalListenTime,
                        engagement_level: 'qualified'
                    });
                }
                
                this.scrollToElement('audio-section');
            }

            setupAudioControls() {
                this.audio = document.getElementById('hypnosisAudio');
                if (!this.audio) return;

                const controlsContainer = document.getElementById('audio-controls');
                if (!controlsContainer) return;

                // Create audio controls HTML
                controlsContainer.innerHTML = `
                    <div class="audio-controls">
                        <button id="playPauseBtn" class="audio-btn" aria-label="Reproduzir ou pausar √°udio">
                            <span id="playIcon">‚ñ∂Ô∏è</span>
                            <span id="pauseIcon" style="display: none;">‚è∏Ô∏è</span>
                        </button>
                        
                        <div class="progress-container">
                            <div class="time-display">
                                <span id="currentTime">00:00</span>
                            </div>
                            <div class="progress-bar-audio">
                                <div class="progress-fill-audio" id="progressFillAudio"></div>
                                <input type="range" id="progressSlider" min="0" max="100" value="0" class="progress-slider" 
                                       aria-label="Barra de progresso do √°udio">
                            </div>
                            <div class="time-display">
                                <span id="duration">00:00</span>
                            </div>
                        </div>
                        
                        <div class="speed-control">
                            <label for="speedSelect" style="font-size: 0.85em; margin-right: 6px;">‚ö°</label>
                            <select id="speedSelect" class="speed-select" aria-label="Velocidade de reprodu√ß√£o">
                                <option value="0.5">0.5x</option>
                                <option value="0.75">0.75x</option>
                                <option value="1" selected>1x</option>
                                <option value="1.25">1.25x</option>
                                <option value="1.5">1.5x</option>
                                <option value="2">2x</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="volume-control">
                        <span style="font-size: 0.85em; margin-right: 6px;">üîä</span>
                        <input type="range" id="volumeSlider" min="0" max="100" value="100" class="volume-slider" 
                               aria-label="Controle de volume">
                    </div>
                `;

                this.bindAudioEvents();
            }

            bindAudioEvents() {
                const playPauseBtn = document.getElementById('playPauseBtn');
                const playIcon = document.getElementById('playIcon');
                const pauseIcon = document.getElementById('pauseIcon');
                const progressFill = document.getElementById('progressFillAudio');
                const progressSlider = document.getElementById('progressSlider');
                const currentTimeSpan = document.getElementById('currentTime');
                const durationSpan = document.getElementById('duration');
                const speedSelect = document.getElementById('speedSelect');
                const volumeSlider = document.getElementById('volumeSlider');

                // Play/Pause functionality
                playPauseBtn.addEventListener('click', () => {
                    if (this.audio.paused) {
                        this.audio.play().catch(error => {
                            console.error('Audio play failed:', error);
                            this.pixelTracker.trackCustomEvent('Audio_Play_Error', {
                                error_message: error.message
                            });
                        });
                    } else {
                        this.audio.pause();
                    }
                });

                // Audio event listeners
                this.audio.addEventListener('play', () => {
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'inline';
                    this.startListeningSession();
                });

                this.audio.addEventListener('pause', () => {
                    playIcon.style.display = 'inline';
                    pauseIcon.style.display = 'none';
                    this.endListeningSession();
                });

                // CORRE√á√ÉO: Tratamento robusto para dura√ß√£o do √°udio
                this.audio.addEventListener('loadedmetadata', () => {
                    this.setDuration();
                });

                this.audio.addEventListener('canplay', () => {
                    this.setDuration();
                });

                this.audio.addEventListener('loadstart', () => {
                    console.log('√Åudio come√ßou a carregar...');
                });

                this.audio.addEventListener('timeupdate', () => {
                    if (!isNaN(this.audio.duration)) {
                        const progress = (this.audio.currentTime / this.audio.duration) * 100;
                        progressFill.style.width = progress + '%';
                        progressSlider.value = this.audio.currentTime;
                        currentTimeSpan.textContent = this.formatTime(this.audio.currentTime);
                    }
                });

                this.audio.addEventListener('ended', () => {
                    playIcon.style.display = 'inline';
                    pauseIcon.style.display = 'none';
                    progressFill.style.width = '0%';
                    progressSlider.value = 0;
                    currentTimeSpan.textContent = '00:00';
                    this.endListeningSession();
                });

                // Progress slider
                progressSlider.addEventListener('input', () => {
                    this.audio.currentTime = progressSlider.value;
                });

                // Speed control
                speedSelect.addEventListener('change', () => {
                    this.audio.playbackRate = parseFloat(speedSelect.value);
                    this.pixelTracker.trackCustomEvent('Audio_Speed_Change', {
                        value: speedSelect.value
                    });
                });

                // Volume control
                volumeSlider.addEventListener('input', () => {
                    this.audio.volume = volumeSlider.value / 100;
                });

                // Error handling
                this.audio.addEventListener('error', (e) => {
                    console.error('Audio loading error:', e);
                    playPauseBtn.innerHTML = '‚ùå';
                    playPauseBtn.disabled = true;
                    this.pixelTracker.trackCustomEvent('Audio_Load_Error', {
                        error_type: 'audio_load_failed'
                    });
                    
                    // Fallback para dura√ß√£o manual
                    this.setDuration(true);
                });
            }

            // NOVO M√âTODO: Configurar dura√ß√£o de forma robusta
            setDuration(useManual = false) {
                const durationSpan = document.getElementById('duration');
                const progressSlider = document.getElementById('progressSlider');
                
                if (!useManual && this.audio.duration && !isNaN(this.audio.duration) && this.audio.duration > 0) {
                    // Dura√ß√£o detectada automaticamente
                    durationSpan.textContent = this.formatTime(this.audio.duration);
                    progressSlider.max = this.audio.duration;
                    console.log('Dura√ß√£o detectada:', this.audio.duration);
                } else {
                    // Usar dura√ß√£o manual da configura√ß√£o
                    durationSpan.textContent = this.formatTime(CONFIG.AUDIO_DURATION);
                    progressSlider.max = CONFIG.AUDIO_DURATION;
                    console.log('Usando dura√ß√£o manual:', CONFIG.AUDIO_DURATION);
                }
            }

            startListeningSession() {
                this.stateManager.updateState({
                    isListening: true,
                    audioSessionStartTime: Date.now()
                });

                this.pixelTracker.trackCustomEvent('Audio_Play_Started', {
                    content_name: 'Hypnosis Audio Started',
                    audio_position: this.audio.currentTime
                });
            }

            endListeningSession() {
                if (this.stateManager.state.audioSessionStartTime) {
                    const sessionTime = Date.now() - this.stateManager.state.audioSessionStartTime;
                    const newTotalTime = this.stateManager.state.totalListenTime + sessionTime;

                    this.stateManager.updateState({
                        isListening: false,
                        audioSessionStartTime: null,
                        totalListenTime: newTotalTime
                    });

                    this.pixelTracker.trackCustomEvent('Audio_Session_End', {
                        session_duration: sessionTime,
                        total_listen_time: newTotalTime,
                        audio_position: this.audio.currentTime
                    });
                }
            }

            renderDynamicBenefits() {
                const answers = this.stateManager.state.answers;
                const q3 = answers[3];
                
                const benefits = {
                    a: ['Controle total sobre suas finan√ßas', 'Decis√µes conscientes de compra', 'Or√ßamento sempre equilibrado'],
                    b: ['Paz mental duradoura', 'Fim da culpa p√≥s-compra', 'Serenidade nas decis√µes financeiras'],
                    c: ['Disciplina financeira s√≥lida', 'Orgulho pessoal genu√≠no', 'For√ßa de vontade desenvolvida'],
                    d: ['Seguran√ßa financeira real', 'Reserva de emerg√™ncia crescente', 'Tranquilidade para o futuro'],
                    e: ['Felicidade duradoura', 'Investimentos conscientes', 'Satisfa√ß√£o com escolhas inteligentes']
                };

                const selectedBenefits = benefits[q3] || benefits.a;
                const bulletsContainer = document.getElementById('personalized-bullets');
                
                if (bulletsContainer) {
                    bulletsContainer.innerHTML = selectedBenefits
                        .map(benefit => `<li>${benefit}</li>`)
                        .join('');
                }
            }

            renderTestimonials() {
                const testimonials = [
                    {
                        text: "Incr√≠vel como funciona! Em uma semana j√° notei diferen√ßa no meu comportamento de compras.",
                        author: "Mariana Silva Gomes",
                        location: "S√£o Paulo, SP"
                    },
                    {
                        text: "Finalmente consegui controlar meus impulsos. O √°udio realmente reprograma a mente!",
                        author: "Jo√£o Carlos dos Santos",
                        location: "Rio de Janeiro, RJ"
                    },
                    {
                        text: "Economizei mais de R$ 500 no primeiro m√™s. Valeu cada centavo investido!",
                        author: "Ana Paula Costa",
                        location: "Belo Horizonte, MG"
                    }
                ];

                const testimonialsSection = document.getElementById('testimonials');
                const container = document.getElementById('testimonial-container');
                
                if (container) {
                    container.innerHTML = testimonials.map(testimonial => `
                        <div class="testimonial-card">
                            <div class="testimonial-text">"${testimonial.text}"</div>
                            <div class="testimonial-author">${testimonial.author}</div>
                            <div class="testimonial-location">${testimonial.location}</div>
                        </div>
                    `).join('');
                }

                testimonialsSection.classList.remove('is-hidden');
            }

            renderFAQ() {
                const faqs = [
                    {
                        question: "Como funciona a hipnoterapia para compras?",
                        answer: "A hipnoterapia trabalha diretamente com o subconsciente, reprogramando os padr√µes autom√°ticos que levam √†s compras impulsivas."
                    },
                    {
                        question: "Preciso usar fones de ouvido?",
                        answer: "N√£o √© obrigat√≥rio, mas recomendamos para uma experi√™ncia mais imersiva e melhores resultados."
                    },
                    {
                        question: "Em quanto tempo vejo resultados?",
                        answer: "Muitas pessoas relatam mudan√ßas j√° na primeira semana de uso regular do √°udio."
                    },
                    {
                        question: "A garantia √© real?",
                        answer: "Sim! Oferecemos 7 dias de garantia incondicional. Se n√£o funcionar, devolvemos 100% do valor."
                    }
                ];

                const faqSection = document.getElementById('faq');
                const container = document.getElementById('faq-container');
                
                if (container) {
                    container.innerHTML = faqs.map((faq, index) => `
                        <div class="faq-item">
                            <button class="faq-question" onclick="toggleFAQ(${index})">
                                ${faq.question}
                            </button>
                            <div class="faq-answer" id="faq-answer-${index}">
                                ${faq.answer}
                            </div>
                        </div>
                    `).join('');
                }

                faqSection.classList.remove('is-hidden');
            }

            setupStickyCTA() {
                const stickyBar = document.getElementById('sticky-cta');
                const container = document.getElementById('main-container');
                
                stickyBar.style.display = 'flex';
                container.classList.add('sticky-active');
            }

            formatTime(seconds) {
                if (isNaN(seconds)) return '00:00';
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            }

            scrollToElement(elementId) {
                setTimeout(() => {
                    const element = document.getElementById(elementId);
                    if (element) {
                        element.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }, 600);
            }
        }

        // ===== CHECKOUT TRACKING =====
        class CheckoutTracker {
            constructor(stateManager, pixelTracker, utmTracker) {
                this.stateManager = stateManager;
                this.pixelTracker = pixelTracker;
                this.utmTracker = utmTracker;
                this.initCheckoutTracking();
            }

            initCheckoutTracking() {
                document.addEventListener('click', (e) => {
                    const checkoutLink = e.target.closest('.checkout-link');
                    
                    if (checkoutLink) {
                        // Update link with UTMs
                        checkoutLink.href = this.utmTracker.appendToUrl(checkoutLink.href);
                        
                        // Track checkout initiation
                        this.pixelTracker.track('InitiateCheckout', {
                            content_name: 'Checkout Started',
                            content_category: 'Purchase',
                            value: 19.90,
                            currency: 'BRL',
                            audio_engagement: this.stateManager.state.totalListenTime,
                            quiz_completed: Object.keys(this.stateManager.state.answers).length === 3,
                            checkout_url: checkoutLink.href
                        });
                    }
                });
            }
        }

        // ===== UI ENHANCEMENTS =====
        class UIEnhancements {
            constructor() {
                this.initBackToTop();
                this.initStickyEnhancements();
                this.initKeyboardNavigation();
            }

            initBackToTop() {
                const backToTop = document.getElementById('back-to-top');
                
                if (backToTop) {
                    backToTop.addEventListener('click', () => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    });
                    
                    window.addEventListener('scroll', () => {
                        if (window.scrollY > 500) {
                            backToTop.classList.add('show');
                        } else {
                            backToTop.classList.remove('show');
                        }
                    });
                }
            }

            initStickyEnhancements() {
                const stickyBar = document.getElementById('sticky-cta');
                
                window.addEventListener('scroll', () => {
                    if (stickyBar && stickyBar.style.display === 'flex') {
                        if (window.scrollY > 200) {
                            stickyBar.classList.add('scrolled');
                        } else {
                            stickyBar.classList.remove('scrolled');
                        }
                    }
                });
            }

            initKeyboardNavigation() {
                document.addEventListener('keydown', (e) => {
                    if (e.target.classList.contains('option') && (e.key === 'Enter' || e.key === ' ')) {
                        e.preventDefault();
                        e.target.click();
                    }
                });
            }
        }

        // ===== GLOBAL FUNCTIONS =====
        function toggleFAQ(index) {
            const question = document.querySelector(`#faq-container .faq-item:nth-child(${index + 1}) .faq-question`);
            const answer = document.getElementById(`faq-answer-${index}`);
            
            if (question && answer) {
                question.classList.toggle('active');
                answer.classList.toggle('active');
            }
        }

        // ===== INITIALIZATION =====
        let stateManager, pixelTracker, utmTracker, quizManager, audioPlayer, checkoutTracker, uiEnhancements;

        function initApp() {
            console.log('Initializing optimized landing page...');
            
            // Initialize core systems
            stateManager = new StateManager();
            pixelTracker = new PixelTracker(stateManager);
            utmTracker = new UTMTracker();
            
            // Initialize feature modules
            quizManager = new QuizManager(stateManager, pixelTracker);
            audioPlayer = new AudioPlayer(stateManager, pixelTracker);
            checkoutTracker = new CheckoutTracker(stateManager, pixelTracker, utmTracker);
            uiEnhancements = new UIEnhancements();
            
            // Apply UTMs to all checkout links
            utmTracker.applyToAllLinks();
            
            // Auto-save state periodically
            setInterval(() => stateManager.saveState(), CONFIG.TRACKING.STATE_SAVE_INTERVAL);
            
            // Save state before page unload
            window.addEventListener('beforeunload', () => {
                if (stateManager.state.isListening && audioPlayer.audio) {
                    audioPlayer.endListeningSession();
                }
                stateManager.saveState();
            });
            
            // Handle page visibility changes
            document.addEventListener('visibilitychange', () => {
                if (document.hidden && stateManager.state.isListening) {
                    audioPlayer.endListeningSession();
                } else if (!document.hidden && stateManager.state.isListening) {
                    stateManager.updateState({ audioSessionStartTime: Date.now() });
                }
            });
            
            console.log('Landing page initialized successfully');
        }

        // ===== ERROR HANDLING =====
        window.addEventListener('error', (e) => {
            console.error('JavaScript error:', e.error);
            
            if (pixelTracker) {
                pixelTracker.trackCustomEvent('JavaScript_Error', {
                    error_message: e.message,
                    error_filename: e.filename,
                    error_lineno: e.lineno
                });
            }
        });

        // ===== DEBUG FUNCTIONS =====
        window.debugLandingPage = function() {
            console.log('=== LANDING PAGE DEBUG ===');
            console.log('State:', stateManager?.state);
            console.log('Pixel Ready:', stateManager?.state?.pixelReady);
            console.log('Total Listen Time:', stateManager?.state?.totalListenTime);
            console.log('Offer Shown:', stateManager?.state?.offerShown);
            console.log('Quiz Answers:', stateManager?.state?.answers);
            console.log('UTMs:', utmTracker?.utmParams);
            console.log('Session ID:', stateManager?.state?.sessionId);
            console.log('Audio Duration (config):', CONFIG.AUDIO_DURATION);
            console.log('Audio Duration (detected):', audioPlayer?.audio?.duration);
        };

        // ===== STARTUP =====
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }

        // Fallback initialization
        window.addEventListener('load', () => {
            if (!stateManager) {
                console.warn('Fallback initialization triggered');
                initApp();
            }
        });
    </script>
</body>
</html>
